(function(e){function f(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function d(a,b){this.el=a;this.options=f({},this.options);f(this.options,b);this._init()}d.prototype.options={newTab:!0,stickyPlaceholder:!0,onChange:function(a){return!1}};d.prototype._init=function(){var a=this.el.querySelector("option[selected]");this.hasDefaultPlaceholder=a&&a.disabled;this.selectedOpt=a||this.el.querySelector("option");this._createSelectEl();this.selOpts=[].slice.call(this.selEl.querySelectorAll("li[data-option]"));
    this.selOptsCount=this.selOpts.length;this.current=this.selOpts.indexOf(this.selEl.querySelector("li.cs-selected"))||-1;this.selPlaceholder=this.selEl.querySelector("span.cs-placeholder");this._initEvents()};d.prototype._createSelectEl=function(){var a="",b=function(a){var b="",c="",d="";!a.selectedOpt||this.foundSelected||this.hasDefaultPlaceholder||(c+="cs-selected ",this.foundSelected=!0);a.getAttribute("data-class")&&(c+=a.getAttribute("data-class"));a.getAttribute("data-link")&&(d="data-link="+
    a.getAttribute("data-link"));""!==c&&(b='class="'+c+'" ');return"<li "+b+d+' data-option data-value="'+a.value+'"><span>'+a.textContent+"</span></li>"};[].slice.call(this.el.children).forEach(function(c){if(!c.disabled){var d=c.tagName.toLowerCase();"option"===d?a+=b(c):"optgroup"===d&&(a+='<li class="cs-optgroup"><span>'+c.label+"</span><ul>",[].slice.call(c.children).forEach(function(c){a+=b(c)}),a+="</ul></li>")}});var c='<div class="cs-options"><ul>'+a+"</ul></div>";this.selEl=document.createElement("div");
    this.selEl.className=this.el.className;this.selEl.tabIndex=this.el.tabIndex;this.selEl.innerHTML='<span class="cs-placeholder">'+this.selectedOpt.textContent+"</span>"+c;this.el.parentNode.appendChild(this.selEl);this.selEl.appendChild(this.el)};d.prototype._initEvents=function(){var a=this;this.selPlaceholder.addEventListener("click",function(){a._toggleSelect()});this.selOpts.forEach(function(b,c){b.addEventListener("click",function(){a.current=c;a._changeOption();a._toggleSelect()})});document.addEventListener("click",
    function(b){b=b.target;var c;if(c=a._isOpen()&&b!==a.selEl){if(b){for(b=b.target||b.srcElement||b||!1;b&&b!=a.selEl;)b=b.parentNode||!1;b=!1!==b}else b=!1;c=!b}c&&a._toggleSelect()});this.selEl.addEventListener("keydown",function(b){switch(b.keyCode||b.which){case 38:b.preventDefault();a._navigateOpts("prev");break;case 40:b.preventDefault();a._navigateOpts("next");break;case 32:b.preventDefault();a._isOpen()&&"undefined"!=typeof a.preSelCurrent&&-1!==a.preSelCurrent&&a._changeOption();a._toggleSelect();
    break;case 13:b.preventDefault();a._isOpen()&&"undefined"!=typeof a.preSelCurrent&&-1!==a.preSelCurrent&&(a._changeOption(),a._toggleSelect());break;case 27:b.preventDefault(),a._isOpen()&&a._toggleSelect()}})};d.prototype._navigateOpts=function(a){this._isOpen()||this._toggleSelect();var b="undefined"!=typeof this.preSelCurrent&&-1!==this.preSelCurrent?this.preSelCurrent:this.current;if("prev"===a&&0<b||"next"===a&&b<this.selOptsCount-1)this.preSelCurrent="next"===a?b+1:b-1,this._removeFocus(),classie.add(this.selOpts[this.preSelCurrent],
    "cs-focus")};d.prototype._toggleSelect=function(){this._removeFocus();this._isOpen()?(-1!==this.current&&(this.selPlaceholder.textContent=this.selOpts[this.current].textContent),classie.remove(this.selEl,"cs-active")):(this.hasDefaultPlaceholder&&this.options.stickyPlaceholder&&(this.selPlaceholder.textContent=this.selectedOpt.textContent),classie.add(this.selEl,"cs-active"))};d.prototype._changeOption=function(){"undefined"!=typeof this.preSelCurrent&&-1!==this.preSelCurrent&&(this.current=this.preSelCurrent,
    this.preSelCurrent=-1);var a=this.selOpts[this.current];this.selPlaceholder.textContent=a.textContent;this.el.value=a.getAttribute("data-value");var b=this.selEl.querySelector("li.cs-selected");b&&classie.remove(b,"cs-selected");classie.add(a,"cs-selected");a.getAttribute("data-link")&&(this.options.newTab?e.open(a.getAttribute("data-link"),"_blank"):e.location=a.getAttribute("data-link"));this.options.onChange(this.el.value)};d.prototype._isOpen=function(a){return classie.has(this.selEl,"cs-active")};
    d.prototype._removeFocus=function(a){(a=this.selEl.querySelector("li.cs-focus"))&&classie.remove(a,"cs-focus")};e.SelectFx=d})(window);