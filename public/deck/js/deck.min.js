var Deck=function(){function g(a){if("undefined"!==typeof t[a])return t[a];if("undefined"!==typeof w[a])return t[a]=a;for(var c=a[0].toUpperCase()+a.slice(1),b=["webkit","moz","Moz","ms","o"],e,d=0,f=b.length;d<f;d++)if(e=b[d]+c,"undefined"!==typeof w[e])return t[a]=e}function l(a,c,b){return m?"translate3d("+a+", "+c+", "+(b||0)+")":"translate("+a+", "+c+")"}function A(a){for(var c,b,e=a.length-1;e;e--)c=Math.random()*e|0,b=a[e],a[e]=a[c],a[c]=b;return a}function y(a){function c(a){a.card&&a.card(p)}
    function b(a){function b(a){var b;"mousemove"===a.type?(b=a.clientX,a=a.clientY):(b=a.touches[0].clientX,a=a.touches[0].clientY);k.style[e]="";k.style[d]=l(b-c.left+"px",a-c.top+"px")}function f(a){"mouseup"===a.type?(window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",f)):(window.removeEventListener("touchmove",b),window.removeEventListener("touchend",f))}var c=p.$root.getBoundingClientRect(),h;a.preventDefault();"mousedown"===a.type?(h=a.clientX,a=a.clientY,window.addEventListener("mousemove",
        b),window.addEventListener("mouseup",f)):(h=a.touches[0].clientX,a=a.touches[0].clientY,window.addEventListener("touchmove",b),window.addEventListener("touchend",f));k.style[e]="all .2s cubic-bezier(0.215, 0.610, 0.355, 1.000)";k.style[d]=l(h-c.left+"px",a-c.top+"px");k.style.zIndex=B++}var e=g("transition"),d=g("transform"),f=a%13+1,h=1===f?"A":11===f?"J":12===f?"Q":13===f?"K":f,n=a/13|0,v=0===n?"spades":1===n?"hearts":2===n?"clubs":3===n?"diamonds":"joker",q=(52-a)/4,k=document.createElement("div"),
        x=document.createElement("div"),m=document.createElement("div"),t=document.createElement("div"),p={i:a,value:f,suit:n,pos:a,$el:k,mount:function(a){a.appendChild(k);p.$root=a},unmount:function(){p.$root&&p.$root.removeChild(k);p.$root=null}},u=r.modules,w;k.classList.add("card",v,v+f);x.classList.add("topleft");m.classList.add("bottomright");t.classList.add("face");p.suitName=v;p.suitNameValue=v+f;x.textContent=4>n?h:"J\nO\nK\nE\nR";m.textContent=4>n?h:"J\nO\nK\nE\nR";k.style.zIndex=52-a;k.style[d]=
        "translate(-"+q+"px, -"+q+"px)";k.appendChild(t);k.appendChild(x);k.appendChild(m);for(w in u)c(u[w]);p.enableMoving=function(){k.style.cursor="move";k.addEventListener("mousedown",b);k.addEventListener("touchstart",b)};p.disableMoving=function(){};return p}function C(a){function c(a){a&&(d.push(a),1===d.length&&b())}function b(){d[0](function(a){if(a)throw a;d=d.slice(1);d.length&&b()})}var e=Array.prototype,d=[];a.queue=c;a.queued=function(a){return function(){var b=this,d=arguments;c(function(f){a.apply(b,
    e.concat.apply(f,d))})}};return a}function D(a){a||(a={});var c={};a.on=function(a,e,d){c[a]||(c[a]=[]);c[a].push({cb:e,ctx:d})};a.one=function(a,e,d){c[a]||(c[a]=[]);c[a].push({cb:e,ctx:d,once:!0})};a.off=function(a,e){a?c[a]=e?c[a].filter(function(a){return a.cb!==e}):[]:c={}};a.trigger=function(a){var b=this,d=Array.prototype.slice(arguments,1);(c[a]||[]).filter(function(a){a.cb.apply(b,d);return!a.once})};return a}function r(a){function c(a){a.deck&&a.deck(e)}a=Array(5);var b=document.createElement("div"),
    e=D({mount:function(a){d=a;d.appendChild(b)},unmount:function(){d.removeChild(b)},cards:a,$el:b}),d,f=r.modules,h;C(e);for(h in f)c(f[h]);b.classList.add("deck");for(var f=0,n=a.length;f<n;f++)h=a[f]=y(f),h.mount(b);return e}var w=document.createElement("p").style,t={},z=g("transform"),u=document.createElement("p");document.body.appendChild(u);u.style[z]="translate3d(1px,1px,1px)";var m=u.style[z],m=null!=m&&m.length&&"none"!==m;document.body.removeChild(u);var B=52;r.modules={bysuit:{deck:function(a){a.bysuit=
    a.queued(function(c){var b=a.cards;b.forEach(function(a){a.bysuit(function(a){a===b.length-1&&c()})})})},card:function(a){var c=g("transform"),b=g("transition"),e=g("transitionDelay"),d=a.value,f=a.suit,h=a.$el;a.bysuit=function(n){var g=a.i,q=10*g,k=15*-(6.75-d),m=105*-(1.5-f);setTimeout(function(){h.style[b]="all .5s cubic-bezier(0.645, 0.045, 0.355, 1.000)";h.style[e]=q/1E3+"s";h.style[c]=l(k+"%",m+"%");h.style.zIndex=g;setTimeout(function(){h.style[b]="";n(g)},500+q)},0)}}},fan:{deck:function(a){a.fan=
    a.queued(function(c){var b=a.cards,e=b.length;b.forEach(function(a,f){a.fan(f,e,function(a){a===b.length-1&&c()})})})},card:function(a){var c=g("transform"),b=g("transformOrigin"),e=g("transition"),d=g("transitionDelay"),f=a.$el;a.fan=function(a,n,g){var h=a/4,k=10*a,v=a/(n-1)*260-130;f.style[b]="50% 110%";setTimeout(function(){f.style[e]="all .3s cubic-bezier(0.645, 0.045, 0.355, 1.000)";f.style[d]=k/1E3+"s";f.style[c]=l(-h+"px",-h+"px");f.style.zIndex=a;setTimeout(function(){f.style[d]="";f.style[c]=
    l(0,0)+"rotate("+v+"deg)"},300+k)},0);setTimeout(function(){g(a)},1E3+k)}}},intro:{deck:function(a){a.intro=a.queued(function(c){var b=a.cards;b.forEach(function(a,d){a.intro(d,function(a){a===b.length-1&&c()})})})},card:function(a){var c=g("transform"),b=g("transition"),e=g("transitionDelay"),d=a.$el;a.intro=function(a,h){var f=10*a+250,g=a/4;d.style[c]=l(-g+"px","-250%");d.style.opacity=0;d.style.zIndex=a;setTimeout(function(){d.style[b]="all 1s cubic-bezier(0.645, 0.045, 0.355, 1.000)";d.style[e]=
    f/1E3+"s";d.style[c]=l(-g+"px",-g+"px");d.style.opacity=1;setTimeout(function(){d.style[b]="";h&&h(a)},1250+f)},500)}}},poker:{deck:function(a){a.poker=a.queued(function(c){var b=a.cards,e=b.length;b.slice(-5).reverse().forEach(function(a,b){a.poker(b,e,function(a){4===a&&c()})})})},card:function(a){var c=g("transform"),b=g("transition"),e=a.$el;a.poker=function(a,f,h){var d=250*a,g=3>a?{x:110*(a-2.05)+110,y:-125}:{x:110*(a-2.05)-55-110,y:0};setTimeout(function(){e.style.zIndex=f-1+a},d);setTimeout(function(){e.style[b]=
    "all .25s cubic-bezier(0.645, 0.045, 0.355, 1.000)";e.style[c]=l(g.x+"%",g.y+"%")},d+25);setTimeout(function(){e.style[b]="";h(a)},d+250)}}},shuffle:{deck:function(a){a.shuffle=a.queued(function(c){var b=a.cards;A(b);b.forEach(function(a,d){a.pos=d;a.shuffle(function(a){a===b.length-1&&c()})})})},card:function(a){var c=g("transform"),b=g("transition"),e=g("transitionDelay"),d=a.$el;a.shuffle=function(f){var h=a.pos,g=h/4,m=(Math.round(Math.random())?-1:1)*(40*Math.random()+30),q=2*h;d.style[b]="all .2s cubic-bezier(0.645, 0.045, 0.355, 1.000)";
    d.style[e]=q/1E3+"s";setTimeout(function(){d.style[c]=l(m+"%",-g+"px")},0);setTimeout(function(){d.style[e]="";d.style.zIndex=h},100+q);setTimeout(function(){d.style[c]=l(-g+"px",-g+"px");setTimeout(function(){d.style[b]="";f(h)},200)},200+q)}}},sort:{deck:function(a){a.sort=a.queued(function(c,b){var e=a.cards;e.sort(function(a,c){return b?a.i-c.i:c.i-a.i});e.forEach(function(a,f){a.sort(f,function(a){a===e.length-1&&c()},b)})})},card:function(a){var c=g("transform"),b=g("transition"),e=a.$el;a.sort=
    function(d,f,g){var h=d/4;g=10*d;setTimeout(function(){e.style[b]="all .4s cubic-bezier(0.645, 0.045, 0.355, 1.000)";e.style[c]=l(-h+"px","-150%")},g);setTimeout(function(){e.style.zIndex=d},200+g);setTimeout(function(){e.style[c]=l(-h+"px",-h+"px");setTimeout(function(){e.style[b]="";a.x=-h;a.y=-h;f(d)},500)},400+g)}}}};r.Card=y;r.easing=function(a){if("cubicInOut"===a)return"cubic-bezier(0.645, 0.045, 0.355, 1.000)"};r.prefix=g;r.translate=l;return r}();